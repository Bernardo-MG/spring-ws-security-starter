components:
  parameters:
    sortParam:
      name: sort
      description: Sorting to apply.
      in: query
      style: form
      explode: true
      required: false
      schema:
        type: array
        items:
          type: string
          pattern: '^(name)\|(asc|desc)$'
          example: username|asc
    name:
      name: name
      description: Role name
      in: path
      required: true
      schema:
        type: string
  schemas:
    Role:
      type: object
      required: [name, permissions]
      properties:
        name:
          type: string
          description: Unique name.
        permissions:
          type: array
          description: List of resource permissions.
          items:
            $ref: 'permissions.yml/#/components/schemas/ResourcePermission'
    RoleCreation:
      type: object
      required: [name, permissions]
      properties:
        name:
          type: string
          description: Name for the new role.
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/RoleCreationPermission'
    RoleCreationPermission:
      type: object
      required: [resource, action]
      properties:
        resource:
          type: string
          description: Name of the secured resource.
        action:
          type: string
          description: Action permitted on the resource.
    RoleChange:
      type: object
      properties:
        permissions:
          type: array
          description: Updated permissions for the role.
          items:
            $ref: 'permissions.yml/#/components/schemas/ResourcePermission'
    RoleQueryRequest:
      type: object
      properties:
        name:
          type: string
          description: Filter roles by name.
    RolePageResponse:
      allOf:
        - $ref: '../common/responses.yml#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/Role'
    RoleResponse:
      type: object
      properties:
        content:
          $ref: '#/components/schemas/Role'